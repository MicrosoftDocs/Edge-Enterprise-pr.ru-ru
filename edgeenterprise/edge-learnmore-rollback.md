---
title: Откат Microsoft Edge для предприятий
ms.author: v-danwes
author: dan-wesley
manager: srugh
ms.date: 11/30/2020
audience: ITPro
ms.topic: conceptual
ms.prod: microsoft-edge
ms.localizationpriority: high
ms.collection: M365-modern-desktop
description: Как откатить Microsoft Edge к предыдущей версии
ms.openlocfilehash: 69fdfd29572dd6eda9f7eb7cbd4c2500851dcafc
ms.sourcegitcommit: 63a094a5268bb3b4819269438357095acd79abac
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/30/2020
ms.locfileid: "11192429"
---
# Как откатить Microsoft Edge к предыдущей версии

В этой статье описано, как вернуться к предыдущей версии Microsoft Edge с помощью функции отката.

>[!NOTE]
>Эта статья относится к Microsoft Edge версии 86 или более поздней.

## Знакомство с откатом

Откат позволяет вам заменить версию браузера Microsoft Edge более ранней. Эта функция разработана в качестве средства предохранения для предприятий, разворачивающих Microsoft Edge. Она предоставляет способ устранения проблем с Microsoft Edge. Преимущество отката — это возможность легко и быстро вернуться к предыдущей версии браузера. Откат снижает возможное воздействие проблем Microsoft Edge на бизнес-операции.

## Перед началом работы

Важно понимать, как функция отката установлена в среде Microsoft Edge. Вы можете развернуть откат двумя способами: вручную с помощью MSI или с помощью обновления Microsoft Edge и групповой политики. Кроме того, мы рекомендуем использовать избранные групповые политики для плавного развертывания.

### Рекомендации

Функция отката предназначена для временного решения проблем, которые могут возникнуть при обновлении браузера Microsoft Edge. Пользователям рекомендуется устанавливать последнюю версию браузера Microsoft Edge, чтобы использовать защиту, обеспечиваемую новейшими обновлениями для системы безопасности. Откат к более ранней версии сопровождается риском возникновения известных проблем безопасности.

Перед временным откатом версии браузера мы также настоятельно рекомендуем включить синхронизацию для всех пользователей в организации. Если не включить синхронизацию, возникает риск необратимой потери данных браузера. Дополнительные сведения о синхронизации см. в статье [Синхронизация Microsoft Edge](microsoft-edge-enterprise-sync.md).

> [!CAUTION]
> Используйте откат только при необходимости. Он всегда сопровождается риском потери данных.

## Включение отката вручную с помощью MSI

Чтобы выполнить откат вручную с помощью MSI, используйте следующие действия.

1. Отключите Центр обновления Microsoft Edge.

   > [!NOTE]
   > Рекомендуем установить самые последние административные шаблоны. Дополнительные сведения см. в разделе [Скачивание и установка административного шаблона Microsoft Edge](https://docs.microsoft.com/DeployEdge/configure-microsoft-edge#1-download-and-install-the-microsoft-edge-administrative-template).

   - Откройте редактор локальных групповых политик и перейдите в раздел *Конфигурация компьютера > Административные шаблоны > Центр обновления Microsoft Edge > Приложения > Microsoft Edge >*.
   - Щелкните **Переопределение политики обновления** и выберите **Включено**.
   - В разделе **Параметры** выберите **Обновление отключено** в раскрывающемся списке политик.

2. Получите установщик MSI.

   - Скачайте MSI для версии, на которую вы хотите откатиться, [отсюда](https://www.microsoft.com/edge/business/download).
   - Сохраните MSI на рабочем столе.

3. Выполните команду отката.

   - Откройте командную строку Windows с помощью параметра **Запуск от имени администратора**.
   - Введите следующую команду, где *C:\Users\username\Desktop\test*  — это путь к скачанному MSI-файлу, а FileName — это имя MSI-файла:<br>
 `C:\Users\username\Desktop\test>msiexec /I FileName.msi /qn ALLOWDOWNGRADE=1`<br>
     > [!NOTE]
     > Дополнительные сведения о команде msiexec см. в статье [msiexec](https://docs.microsoft.com/windows-server/administration/windows-commands/msiexec).
   - Закройте и снова откройте Microsoft Edge, чтобы убедиться в выполнении отката. В разделе **Настройки и прочее** (ALT+F), откройте **Настройки** и выберите **О программе Microsoft Edge**.

## Включение отката с помощью обновления Microsoft Edge и групповой политики

Чтобы включить откат с помощью обновления Microsoft Edge и групповой политики, используйте следующие действия.

1. Откройте редактор локальных групповых политик и перейдите в раздел *Конфигурация компьютера > Административные шаблоны > Центр обновления Microsoft Edge > Приложения > Microsoft Edge >*.
2. Нажмите **Откат до целевой версии** и выберите **Включено**.
3. Щелкните **Переопределение целевой версии** и выберите версию браузера, на которую нужно откатиться.
4. Щелкните **Переопределение политики обновления** и выберите **Включено**. В разделе **Параметры** выберите один из следующих вариантов в раскрывающемся списке политик (кроме **Обновление отключено**):

   - Всегда разрешать обновления
   - Только автоматические обновления

     > [!NOTE]
     > Чтобы принудительно выполнить обновление групповой политики, введите `gpupdate /force` в командной строке администратора Windows (Запуск от имени администратора).

5. Нажмите **ОК**, чтобы сохранить параметры политики. Откат произойдет при следующей проверке обновлений Центром обновления Microsoft Edge. Если вы хотите ускорить обновление, вы можете изменить интервал опроса Центра обновления Microsoft Edge или включить откат с помощью MSI.

### Распространенные ошибки отката

Следующие ошибки препятствуют откату:

- Ввод неподдерживаемой целевой версии
- Ввод несуществующий целевой версии
- Введенные данные неправильно отформатированы

### Рекомендуемые групповые политики

Для отката настоятельно рекомендуется использовать следующие групповые политики и параметры.

#### Групповые политики синхронизации

- ForceSync. Присвойте политике ForceSync значение "Включено". Эта политика принудительно включает синхронизацию для всех пользователей Azure Active Directory (Azure AD). Эта политика действует только в версиях Microsoft Edge 86 и более поздних.
- Политика *Настроить список типов, исключаемых из политики синхронизации* позволяет администраторам указывать, какие данные могут синхронизировать пользователи.

#### Групповые политики перезапуска браузера

Рекомендуем принудительно использовать перезапуск для пользователей после включения отката.

- Включите политику *Уведомлять пользователя, что для ожидающих обновлений рекомендуется или требуется перезапуск браузера*. В разделе параметров выберите **Обязательно**.
- Включите параметр *Установить период времени для уведомлений об обновлениях* и задайте нужное время в миллисекундах.

## Моментальный снимок

Моментальный снимок — это копия папки данных пользователя со штампом версии. При обновлении версии создается моментальный снимок предыдущей версии и сохраняется в папке снимков. После выполнения отката снимок соответствующей версии копируется в новую папку данных пользователя и удаляется из папки снимков. Если при переходе на более раннюю версию снимок соответствующий версии недоступен, при откате будет использоваться синхронизация для внесения данных пользователя в новую версию Microsoft Edge.

Групповая политика [UserDataSnapshotRetentionLimit](https://docs.microsoft.com/deployedge/microsoft-edge-policies#userdatasnapshotretentionlimit) позволяет установить ограничение количества моментальных снимков, которые могут быть сохранены в любой момент времени. По умолчанию сохраняются три снимка. Эту политику можно настроить так, чтобы сохранялось 0–5 моментальных снимков.

## Вопросы и ответы

### Откат вручную с помощью MSI

#### Какие общие сбои MSI могут возникать?

1. Если групповая политика установки обновлений отключена, откат не выполняется.

   - Чтобы использовать откат, присвойте политике установки значение **Включено**. Если эта политика отключена, каналы Microsoft Edge не устанавливаются. Дополнительные сведения см. в разделе [Установка](https://docs.microsoft.com/deployedge/microsoft-edge-update-policies#install).

2. Если обновление компонента паравиртуализации отсутствует, установка Microsoft Edge будет блокироваться, если не включен параметр *Разрешить параллельный запуск разных типов браузеров Microsoft Edge*.

   - Для Windows версий 1903 и 1909: если последнее обновление было выполнено до октября 2019 г., у вас может возникать эта проблема.
   - Для Windows версий 1709, 1803 и 1809: если последнее обновление было выполнено до ноября 2019 г., у вас может возникать эта проблема.<br>
Дополнительные сведения см. в разделе [Обновления Windows для обеспечения поддержки следующей версии Microsoft Edge](https://docs.microsoft.com/deployedge/microsoft-edge-sysupdate-windows-updates).

#### После использования командной строки отображается следующее сообщение об ошибке и откат не выполняется. В чем заключается проблема?

![Сообщение о состоянии отката](./media/edge-learnmore-rollback/edge-rollback-cmd-flag-error.png)

Команда *ALLOWDOWNGRADE=1* не выполнена.

### Откат с помощью Центра обновления Microsoft Edge и групповой политики

#### Я настроил политику *Откат до целевой версии*, включил *Переопределение политики обновления*, ввел нужную версию браузера для политики *Переопределение целевой версии*, но версия браузера отличается от ожидаемой. В чем заключается проблема?

Некоторые распространенные ошибки, препятствующие откату:

- Если политика "Откат до целевой версии" не настроена, откат не выполняется.
- Существует одна из следующих проблем с параметром переопределения целевой версии:

  - Переопределение целевой версии настроено на неподдерживаемую целевую версию.
  - Переопределение целевой версии настроено на несуществующую целевую версию.
  - Введенные данные переопределения целевой версии имеют неверный формат.

- Если параметру переопределения политики обновления присвоено значение "Обновления отключены", Центр обновления Microsoft Edge не будет принимать обновления и откат не будет выполнен.

### Я правильно настроил все групповые политики, но откат не выполнен. Что случилось?

Центр обновления Microsoft Edge еще не проверял наличие обновлений. По умолчанию автоматическая проверка наличия обновлений выполняется каждые 10 часов. Вы можете устранить эту проблему, изменив интервал опроса Центра обновления Microsoft Edge с помощью групповой политики переопределения периода автоматической проверки обновлений. Дополнительные сведения см. в политике [AutoUpdateCheckPeriodMinutes](https://docs.microsoft.com/deployedge/microsoft-edge-update-policies#autoupdatecheckperiodminutes).

### В качестве ИТ-администратора я правильно выполнил все действия для отката. Откат выполнен только для части моей группы пользователей. Почему другие пользователи еще не откатились?

Параметр групповой политики еще не синхронизирован со всеми клиентами. Когда администраторы настраивают групповую политику, клиенты не сразу получают эти параметры. Вы можете выполнить [принудительное удаленное обновление групповой политики](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/jj134201(v=ws.11)).

## См. также

- [Целевая страница Microsoft Edge Enterprise](https://aka.ms/EdgeEnterprise)
