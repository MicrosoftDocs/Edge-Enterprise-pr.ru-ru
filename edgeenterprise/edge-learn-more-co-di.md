---
title: Функции ClickOnce и DirectInvoke в Microsoft Edge
ms.author: kele
author: dan-wesley
manager: srugh
ms.date: 04/30/2020
audience: ITPro
ms.topic: conceptual
ms.prod: microsoft-edge
ms.localizationpriority: high
ms.collection: M365-modern-desktop
description: Сведения о функциях ClickOnce и DirectInvoke в Microsoft Edge.
ms.openlocfilehash: 8290c34bd29ca72678e3fa68f74b689d0cf797e3
ms.sourcegitcommit: 4edbe2fc2fc9a013e6a0245aba485fcc5905539b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/31/2020
ms.locfileid: "10980915"
---
# Общие сведения о функциях ClickOnce и DirectInvoke в Microsoft Edge

ClickOnce и DirectInvoke — это функции, доступные в IE и Microsoft Edge (версии 45 и более ранних версий), которые поддерживают использование обработчика файлов для скачивания файлов с веб-сайтов. Несмотря на то что у этих функций разное назначение, они позволяют указывать веб-сайтам, что запрошенный для скачивания файл, передается в обработчик файлов на устройстве пользователя. Запросы ClickOnce обрабатываются с помощью собственного обработчика файлов в Windows. Запросы DirectInvoke обрабатываются зарегистрированным обработчиком файлов, заданным веб-сайтом, на котором размещен файл.

Дополнительные сведения об этих функциях см. в следующих статьях.

- [ClickOnce](https://docs.microsoft.com/visualstudio/deployment/clickonce-security-and-deployment?view=vs-2019)
- [DirectInvoke]( https://technet.microsoft.com/learning/jj215788(v=vs.94).aspx)

> [!NOTE]
> В данный момент в Chromium не реализована встроенная поддержка функций ClickOnce или DirectInvoke.

## Обзор: необходимые условия и процессы

Чтобы функции ClickOnce и DirectInvoke работали правильно и обработчик файлов успешно запрашивался, обработчик файлов должен быть зарегистрирован в операционной системе в качестве поддерживающего функции ClickOnce или DirectInvoke. Обычно такая регистрация происходит, когда устанавливается исходная операционная система или когда новая устанавливаемая программа запрашивает возможность использования функции DirectInvoke для обновлений.

Когда веб-сайт получает запрос на скачивание, требующий наличия функций ClickOnce или DirectInvoke, выполняются следующие действия.

- Веб-сайт запрашивает, чтобы браузер использовал указанный обработчик файлов.
- Браузер проверяет реестр операционной системы, чтобы узнать, зарегистрирован ли обработчик файлов для запрошенного типа файла.
- Если обработчик файлов зарегистрирован, браузер вызывает обработчик файлов и передает URL-адрес в качестве аргумента обработчику файлов.
- Обработчик файлов обрабатывает URL-адрес и загружает файл.

  > [!NOTE]
  > Этот URL-адрес используется для определения источника файла, а также всех параметров доступа к файлу.  Например: конечные точки, манифест или метаданные.

## Варианты использования

Следующие варианты использования являются примерами.

С помощью ClickOnce можно легко развертывать и обновлять программное обеспечение на устройствах при минимальном участии со стороны пользователя. Пользователи могут установить и запустить Windows-приложение, щелкнув ссылку на веб-странице. Если функция настроена правильно, приложение ClickOnce может устанавливать программы без необходимости в задании конфигураций для установщика пользователями. Например, расположения файлов, параметры установки и т. д.

Варианты использования DirectInvoke зависят от того, зачем веб-сайт запрашивает DirectInvoke. Например, для использования функции совместного редактирования файлов Microsoft Word. Вместо перехода по ссылке и скачивания всей копии документа, над которым вы работаете с коллегами, функция DirectInvoke позволяет скачивать части документа, которые были изменены. Эта стратегия уменьшает объем передаваемых данных и помогает сократить время, необходимое для открытия документа.  

## Текущая поддержка функций ClickOnce и DirectInvoke в Microsoft Edge

Поддержка ClickOnce и DirectInvoke:

- Функция DirectInvoke по умолчанию доступна всем пользователям Windows, однако функция ClickOnce отключена для всех пользователей Windows.

  > [!NOTE]
  > Пользователи, которым требуется поддержка ClickOnce, могут перейти на страницу edge://flags/#edge-click-once и выбрать **Включить** в раскрывающемся списке. После этого будет необходимо **Перезапустить**браузер.

- Функции ClickOnce и DirectInvoke не поддерживаются на платформах, отличных от Windows.
- Так как функция ClickOnce является ориентированной на предприятие функцией, которую использует определенная группа опытных пользователей, и не предназначена для общего использования, она по умолчанию отключена.

## Безопасность обработки файлов в ClickOnce и DirectInvoke

Функции ClickOnce и DirectInvoke защищены службой проверки репутации фильтра SmartScreen в Microsoft Defender.

Если запрос ClickOnce или DirectInvoke помечен службой проверки репутации URL-адресов фильтра SmartScreen в Microsoft Defender как небезопасный, для пользователей с включенными функциями ClickOnce или DirectInvoke будут отображаться два всплывающих окна.

Первое всплывающее окно спрашивает у пользователя, хочет ли он открыть файл. Это всплывающее окно отображается независимо от того, был ли файл помечен как безопасный или небезопасный. Пользователь может **Сообщить, что файл небезопасен**, **Отменить** запрос или нажать **Открыть**, чтобы продолжить.

   ![Запрос на открытие файла](./media/edge-learn-more-co-di/edge-clickonce-modal-1.png)

Если пользователь пытается открыть файл, который был помечен как небезопасный, отображается второе всплывающее окно.  Это всплывающее окно предупреждает пользователя о том, что файл был помечен как небезопасный, и запрашивает подтверждение на скачивание файла.

Второе всплывающее окно отображается только в следующих случаях:

- Файл является файлом ClickOnce или DirectInvoke
- Функции ClickOnce или DirectInvoke включены
- Файл помечен как небезопасный

 ![Запрос на открытие небезопасного файла](./media/edge-learn-more-co-di/edge-clickonce-modal-2.png)

> [!NOTE]
> Если функции ClickOnce или DirectInvoke отключены, запрашиваемые файлы обрабатываются как обычные загрузки, и если они будут помечены как небезопасные, то эта отметка останется. Аналогичным образом обрабатываются другие небезопасные загрузки.

## Политики ClickOnce и DirectInvoke

Существует две групповых политики, которые можно использовать для включения и отключения функций ClickOnce и DirectInvoke для корпоративных пользователей. Этими политиками являются [ClickOnceEnabled](https://docs.microsoft.com/DeployEdge/microsoft-edge-policies#clickonceenabled) и [DirectInvokeEnabled](https://docs.microsoft.com/DeployEdge/microsoft-edge-policies#directinvokeenabled). Эти две политики в редакторе групповой политики называются "Разрешить пользователям открывать файлы с использованием протокола ClickOnce" и "Разрешить пользователям открывать файлы с использованием протокола DirectInvoke" соответственно.

## Поведение ClickOnce и DirectInvoke

В следующих примерах представлен процесс обработки файлов, когда функции ClickOnce и DirectInvoke включены и отключены.

### Функция ClickOnce включена

1. Пользователь открывает ссылку на страницу, которая запрашивает поддержку ClickOnce, и видит запрос, представленный на следующем снимке экрана.

   ![Запрос на открытие небезопасного файла](./media/edge-learn-more-co-di/edge-clickonce-enabled-1.png)

2. После нажатия **Открыть** функция ClickOnce попытается запустить приложение.

   ![Функция ClickOnce пытается запустить приложение](./media/edge-learn-more-co-di/edge-clickonce-enabled-launch-app.png)

3. После нажатия кнопки **Открыть** в браузере отобразится всплывающее окно, в котором пользователю будет предложено установить приложение.

   ![Запрос на открытие файла](./media/edge-learn-more-co-di/edge-clickonce-enabled-2.png)

   > [!NOTE]
   > Интерфейс, сообщения и параметры, отображаемые обработчиком файлов ClickOnce, зависят от типа и конфигурации файла, к которому осуществляется доступ.

### Функция ClickOnce отключена

1. Когда пользователь открывает ссылку на страницу, которая запрашивает поддержку ClickOnce, он видит в панели загрузки сообщение, похожее на сообщение, представленное на следующем снимке экрана.

   ![Запрос на загрузку файла](./media/edge-learn-more-co-di/edge-clickonce-disabled-1.png)

### Функция DirectInvoke включена

1. Пользователь открывает ссылку на страницу, которая запрашивает поддержку DirectInvoke, и видит запрос, представленный на следующем снимке экрана.

   ![Запрос на открытие файла](./media/edge-learn-more-co-di/edge-directinvoke-open-link-1.png)

2. Когда пользователь нажимает кнопку **Открыть**, открывается запрошенный обработчик файлов. В этом примере для открытия документа, показанного на предыдущем снимке экрана, используется Microsoft Word.

   > [!NOTE]
   > Интерфейс, сообщения и параметры, отображаемые обработчиком файлов DirectInvoke, зависят от типа и конфигурации файла, к которому осуществляется доступ.

### Функция DirectInvoke отключена

1. Когда пользователь открывает ссылку на страницу, которая запрашивает поддержку DirectInvoke, функция DirectInvoke работает так же, как при отключенной функции ClickOnce. Пользователь видит сообщение в панели загрузки, похожее на сообщение, представленное на следующем снимке экрана.

   ![Запрос на открытие файла](./media/edge-learn-more-co-di/edge-directinvoke-open-link-2.png)

## Статьи по теме

- [Безопасность и развертывание ClickOnce](https://go.microsoft.com/fwlink/?linkid=2099880)
- [Функция DirectInvoke в Internet Explorer](https://go.microsoft.com/fwlink/?linkid=2099871)
- [Целевая страница Microsoft Edge Enterprise](https://aka.ms/EdgeEnterprise)
